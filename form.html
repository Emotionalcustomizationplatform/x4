<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Application | Private Counsel</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Playfair+Display:wght@500;600&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg: #02020a; --accent: #9d8aff; --glow-color: rgba(157, 138, 255, 0.4);
            --text: #e0e0e0; --text-dark: #888; --border-color: rgba(255, 255, 255, 0.1);
            --card-bg: rgba(18, 18, 24, 0.7);
        }
        body { background-color: var(--bg); color: var(--text); font-family: 'Inter', sans-serif; margin: 0; min-height: 100vh; display: flex; align-items: center; justify-content: center; }
        .form-container { width: 100%; max-width: 1000px; padding: 2rem; text-align: center; }
        .step { display: none; }
        .step.active { display: block; }
        .step-title { font-family: 'Playfair Display', serif; font-size: clamp(2.5rem, 5vw, 4rem); font-weight: 600; margin-bottom: 1rem; letter-spacing: -0.02em; }
        .step-subtitle { color: var(--text-dark); margin-bottom: 4rem; font-size: 1.1rem; max-width: 700px; margin-left: auto; margin-right: auto; }
        
        .selection-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; margin-bottom: 4rem; perspective: 1000px; }
        .selection-card {
            position: relative; background: var(--card-bg); backdrop-filter: blur(15px);
            border: 1px solid var(--border-color); border-radius: 20px; padding: 2.5rem;
            cursor: pointer; transition: transform 0.2s linear, border-color 0.3s;
            text-align: left; overflow: hidden;
        }

        .selection-card::after {
            content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            border-radius: 20px; padding: 1px;
            background: conic-gradient(from var(--angle, 0deg), #9d8aff, #ff8bf8, #26f0d3, #9d8aff);
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: destination-out; mask-composite: exclude;
            animation: rotateBorder 4s linear infinite paused;
            opacity: 0; transition: opacity 0.4s;
        }
        @property --angle { syntax: '<angle>'; inherits: false; initial-value: 0deg; }
        @keyframes rotateBorder { from { --angle: 0deg; } to { --angle: 360deg; } }

        .selection-card:hover, .selection-card.active { transform: translateY(-5px) scale(1.02); }
        .selection-card:hover::after, .selection-card.active::after { animation-play-state: running; opacity: 1; }

        .tooltip-text { position: absolute; bottom: -45px; left: 50%; transform: translateX(-50%); background: #111; color: var(--text); padding: 8px 14px; border-radius: 8px; font-size: 0.85rem; white-space: nowrap; pointer-events: none; opacity: 0; visibility: hidden; transition: opacity 0.3s, bottom 0.3s; }
        #step2 .selection-card:hover .tooltip-text { opacity: 1; visibility: visible; bottom: -55px; }
        
        /* [UPGRADED] Refined Icon Hover Animation */
        .card-icon {
            position: relative;
            display: inline-block;
            transition: transform 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
            z-index: 2;
        }
        .card-icon::before {
            content: '';
            position: absolute;
            top: 50%; left: 50%;
            width: 70px; height: 70px;
            background: radial-gradient(circle, var(--glow-color) 0%, transparent 65%);
            transform: translate(-50%, -50%) scale(0);
            z-index: -1;
            opacity: 0;
            transition: transform 0.4s ease, opacity 0.4s ease;
        }
        .selection-card:hover .card-icon {
            transform: scale(1.1);
        }
        .selection-card:hover .card-icon::before {
            transform: translate(-50%, -50%) scale(1);
            opacity: 1;
        }

        .featured-badge { position: absolute; top: 20px; right: 20px; background: var(--accent); color: #000; padding: 4px 12px; border-radius: 20px; font-size: 0.8rem; font-weight: 600; }
        .card-title { font-size: 1.5rem; font-weight: 600; margin-bottom: 0.75rem; }
        .card-desc { color: var(--text-dark); line-height: 1.6; font-size: 0.95rem; }
        .card-price { margin-top: 1.5rem; font-size: 2rem; font-weight: 500; }
        .card-price .period { font-size: 1rem; color: var(--text-dark); }
        .input-box { max-width: 450px; margin: 0 auto; }
        .form-input { width: 100%; background: var(--card-bg); border: 1px solid var(--border-color); padding: 1rem; font-size: 1rem; color: var(--text); margin-bottom: 1.5rem; border-radius: 12px; transition: border-color 0.3s, box-shadow 0.3s; font-family: 'Inter', sans-serif; box-sizing: border-box; }
        .form-input::placeholder { color: var(--text-dark); }
        .form-input:focus { outline: none; border-color: var(--accent); box-shadow: 0 0 15px rgba(157, 138, 255, 0.2); }
        .nav-bar { display: flex; justify-content: center; gap: 1rem; margin-top: 2rem; }
        .btn { text-decoration: none; display: inline-block; border: none; cursor: pointer; padding: 0.9rem 2.5rem; border-radius: 50px; font-weight: 600; font-size: 0.95rem; transition: transform 0.3s, background-color 0.3s; }
        .btn:hover { transform: scale(1.05); }
        .btn-next { background: var(--accent); color: #000; }
        .btn-back { background: transparent; border: 1px solid var(--border-color); color: var(--text-dark); }
        .btn-back:hover { border-color: var(--text); color: var(--text); }
        #success { display: none; opacity: 0; }
        #success .step-title { color: var(--accent); }
    </style>
</head>
<body>
<div class="form-container">
    <form id="bespokeForm">
        <!-- The HTML structure for all steps remains identical to V10.0 -->
        <div class="step active" id="step1">
            <h2 class="step-title">Choose Your Path</h2>
            <p class="step-subtitle">All conversations start here. No payment is required today.</p>
            <div class="selection-grid">
                <div class="selection-card active" onclick="selectPlan('Initial Dialogue', '0', this)">
                    <div class="card-icon">üí°</div>
                    <div class="card-title">Initial Dialogue</div>
                    <p class="card-desc">A no-commitment starting point to understand your needs and experience our method.</p>
                    <div class="card-price">$0</div>
                </div>
                <div class="selection-card" onclick="selectPlan('Continuous Counsel', '710', this)">
                    <span class="featured-badge">Full Access</span>
                    <div class="card-icon">üöÄ</div>
                    <div class="card-title">Continuous Counsel</div>
                    <p class="card-desc">Ongoing, unlimited asynchronous support for deep and continuous personal and professional growth.</p>
                    <div class="card-price">$710 <span class="period">/ month</span></div>
                </div>
            </div>
            <input type="hidden" name="selected_plan" id="selected_plan" value="Initial Dialogue ($0)">
            <div class="nav-bar"><button type="button" class="btn btn-next" onclick="navigateStep(2)">Next Step</button></div>
        </div>
        <div class="step" id="step2">
             <h2 class="step-title">What is Your Priority?</h2>
            <p class="step-subtitle">This helps us align the right expert for your initial dialogue.</p>
            <input type="hidden" name="support_type" id="support_type">
            <div class="selection-grid">
                <div class="selection-card" onclick="selectOption('support_type', 'Psychological Strategy', this)">
                    <div class="card-icon">üß†</div><div class="card-title">Strategic Psychology</div>
                    <div class="card-desc">For navigating high-pressure stress, burnout, and complex decisions as a leader.</div>
                    <span class="tooltip-text">For founders & executives.</span>
                </div>
                <div class="selection-card" onclick="selectOption('support_type', 'Emotional Support', this)">
                    <div class="card-icon">‚ù§Ô∏è</div><div class="card-title">Empathetic Support</div>
                    <div class="card-desc">For when you need a private, non-judgmental human space to be heard and understood.</div>
                    <span class="tooltip-text">100% confidential listening.</span>
                </div>
                <div class="selection-card" onclick="selectOption('support_type', 'Cultural Strategy (HSK 8)', this)">
                    <div class="card-icon">Êñá</div><div class="card-title">Mandarin Mastery</div>
                    <div class="card-desc">For elite cultural strategy, negotiation nuances, and advanced language mastery.</div>
                    <span class="tooltip-text">For global business.</span>
                </div>
            </div>
            <div class="nav-bar"><button type="button" class="btn btn-back" onclick="navigateStep(1)">Back</button><button type="button" class="btn btn-next" onclick="navigateStep(3)">Continue</button></div>
        </div>
        <div class="step" id="step3">
            <h2 class="step-title">Confidential Details</h2>
            <p class="step-subtitle">This is a secure, one-time submission of your needs. Our team will contact you via Email or WhatsApp to schedule your dialogue. No charge will be made.</p>
            <div class="input-box">
                <input type="text" name="name" placeholder="Full Name" required class="form-input">
                <input type="email" name="email" placeholder="Email Address" required class="form-input">
                <input type="text" name="phone" placeholder="Phone with country code (for WhatsApp)" class="form-input">
                <input type="hidden" name="referrer" id="referrerField">
            </div>
            <div class="nav-bar"><button type="button" class="btn btn-back" onclick="navigateStep(2)">Back</button><button type="submit" class="btn btn-next" id="submitBtn">Submit Secure Request</button></div>
        </div>
    </form>
    <div id="success">
        <h2 class="step-title">Request Received</h2>
        <p class="step-subtitle">Thank you. You will be redirected to the homepage in <span id="countdown">5</span> seconds...</p>
        <a href="index.html" class="btn btn-back">Return Home Now</a>
    </div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script>
    function animateIn(stepId) { const step = document.getElementById(stepId); gsap.fromTo(step, { opacity: 0, y: 20 }, { opacity: 1, y: 0, duration: 0.6, ease: "power3.out" }); }
    function animateOut(stepId, onComplete) { const step = document.getElementById(stepId); gsap.to(step, { opacity: 0, y: -20, duration: 0.3, ease: "power3.in", onComplete: onComplete }); }
    animateIn('step1');
    document.querySelectorAll('.selection-card').forEach(card => {
        card.addEventListener('mousemove', (e) => {
            const rect = card.getBoundingClientRect();
            card.style.setProperty('--angle', `${((e.clientX - rect.left) / rect.width) * 360}deg`);
        });
    });
    let currentStep = 1;
    function navigateStep(targetStep) {
        if (targetStep === currentStep) return;
        if (targetStep === 3 && !document.getElementById('support_type').value) {
            alert("Please select a priority focus before continuing."); return;
        }
        animateOut('step' + currentStep, () => {
            document.getElementById('step' + currentStep).classList.remove('active');
            const nextStepEl = document.getElementById('step' + targetStep);
            nextStepEl.classList.add('active'); animateIn('step' + targetStep);
            currentStep = targetStep;
        });
    }
    function selectPlan(name, price, el) {
        document.querySelectorAll('#step1 .selection-card').forEach(c => c.classList.remove('active'));
        el.classList.add('active'); let priceString = (price === '0') ? '$0' : `$${price}/mo`;
        document.getElementById('selected_plan').value = `${name} (${priceString})`;
    }
    function selectOption(fieldId, value, el) {
        document.querySelectorAll('#step2 .selection-card').forEach(c => c.classList.remove('active'));
        el.classList.add('active'); document.getElementById(fieldId).value = value;
    }
    window.addEventListener('DOMContentLoaded', () => {
        const refCode = new URLSearchParams(window.location.search).get('ref');
        if (refCode) { document.getElementById('referrerField').value = refCode; }
    });
    const form = document.getElementById('bespokeForm');
    form.onsubmit = async (e) => {
        e.preventDefault(); const btn = document.getElementById('submitBtn'); btn.innerText = "Processing..."; btn.disabled = true;
        const payload = { ...Object.fromEntries(new FormData(form)), submittedAt: new Date().toISOString() };
        try {
            setTimeout(() => {
                animateOut('bespokeForm', () => {
                    form.style.display = 'none'; const successEl = document.getElementById('success');
                    successEl.style.display = 'block'; gsap.to(successEl, { opacity: 1, duration: 1 });
                    let countdown = 5;
                    const countdownEl = document.getElementById('countdown');
                    const interval = setInterval(() => {
                        countdown--; countdownEl.innerText = countdown;
                        if (countdown <= 0) { clearInterval(interval); window.location.href = 'index.html'; }
                    }, 1000);
                });
            }, 1000);
        } catch(err) {
            alert('An error occurred.'); btn.innerText = "Submit Secure Request"; btn.disabled = false;
        }
    };
</script>
</body>
</html>
